--INIT DATABASE
--CREATE DATABASE ReservApp
USE ReservApp
GO
--1. TABLE CUSTOMERS
CREATE TABLE Customers(
CustomerID INT IDENTITY(1,1) PRIMARY KEY,
Name VARCHAR(30),
LastName VARCHAR(30),
PhoneNumber VARCHAR(30),
Email VARCHAR(40),
PasswordHash VARBINARY(8000),
Status BIT
);
--2. TABLE HOSTS
CREATE TABLE Hosts(
HostID INT IDENTITY(1,1) PRIMARY KEY,
Name VARCHAR(30),
LastName VARCHAR(30),
PhoneNumber VARCHAR(30),
Email VARCHAR(40),
PasswordHash VARBINARY(8000),
Status BIT
);
--3. TABLE ADDRESSINFO
--THIS TABLE IS USED TO MAP ADRESS TO A ID
CREATE TABLE AddressInfo(
AddressID INT IDENTITY(1,1) PRIMARY KEY,
Street VARCHAR(40),
City VARCHAR(40),
Area VARCHAR(40),
Country VARCHAR(40),
PostalCode INT,
OutsideNumber INT
);
--4. TABLE AMENITYS
CREATE TABLE Amenitys(
AmenityID INT IDENTITY(1,1) PRIMARY KEY,
Name VARCHAR(20),
Description VARCHAR(40),
);
--NON-DEPENDENT TABLES CREATED
--TABLES THAT HAVE 1 OR MORE FOREIGN KEYS
--5. TABLE PROPERTIESINFO
CREATE TABLE PropertiesInfo(
PlaceID INT IDENTITY(1,1) PRIMARY KEY,
HostID INT,
AddressID INT,
Status BIT,
Type VARCHAR(20),
ExpectedGuests INT,
Price Money,
Description VARCHAR(50),
CONSTRAINT FK_PropertiesInfo_HostID FOREIGN KEY(HostID) REFERENCES Hosts(HostID),
CONSTRAINT FK_PropertiesInfo_AddressID FOREIGN KEY(AddressID) REFERENCES AddressInfo(AddressID)
);
--6. TABLE PROPERTIEPHOTOS
CREATE TABLE PropertiePhotos(
PhotoID INT IDENTITY(1,1) PRIMARY KEY,
PlaceID INT,
PhotoURL VARCHAR(MAX),
IsCoverPhoto BIT,
CONSTRAINT FK_PropertiePhotos_PlaceID FOREIGN KEY(PlaceID) REFERENCES PropertiesInfo(PlaceID)
);
--7. TABLE PROPERTIEAMENITYS
CREATE TABLE PropertieAmenitys(
PlaceID INT,
AmenityID INT,
CONSTRAINT FK_PropertieAmenitys_PlaceID FOREIGN KEY(PlaceID) REFERENCES PropertiesInfo(PlaceID),
CONSTRAINT FK_PropertieAmenitys_AmenityID FOREIGN KEY(AmenityID) REFERENCES Amenitys(AmenityID)
);
--8. TABLE RESERVATIONDATA
CREATE TABLE ReservationData(
ReservID INT IDENTITY(1,1) PRIMARY KEY,
CustomerID INT,
PlaceID INT,
Travelers INT,
CheckInDate DATETIME2,
CheckOutDate DATETIME2,
CONSTRAINT FK_ReservationData_CustomerID FOREIGN KEY(CustomerID) REFERENCES Customers(CustomerID),
CONSTRAINT FK_ReservationData_PlaceID FOREIGN KEY(PlaceID) REFERENCES PropertiesInfo(PlaceID)
);
--9. TABLE PAYMENTS
CREATE TABLE Payments(
PaymentID INT IDENTITY(1,1) PRIMARY KEY,
ReservID INT,
Payment VARCHAR(10),
CONSTRAINT FK_Payments_ReservID FOREIGN KEY(ReservID) REFERENCES ReservationData(ReservID)
);
--10. TABLE SALES
CREATE TABLE Sales(
TicketID INT IDENTITY(1,1) PRIMARY KEY,
PaymentID INT,
SaleDate DATETIME2,
CONSTRAINT FK_Sales_PaymentID FOREIGN KEY(PaymentID) REFERENCES Payments(PaymentID)
);
--11. TABLE REVIEWS
CREATE TABLE Reviews(
ReviewID INT IDENTITY(1,1) PRIMARY KEY,
ReservID INT,
Rating INT,
Comment VARCHAR(MAX),
DateReview DATETIME,
CONSTRAINT FK_Reviews_ReservID FOREIGN KEY(ReservID) REFERENCES ReservationData(ReservID)
);


